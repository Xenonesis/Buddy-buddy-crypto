<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Test Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #qrcode {
            margin-top: 20px;
            text-align: center;
        }
        .qr-container {
            display: inline-block;
            padding: 20px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 10px;
        }
        .sample-qr {
            margin: 10px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>ðŸ”§ QR Code Test Generator</h1>
    <p>Generate test QR codes to scan with the app</p>

    <div class="form-group">
        <label for="address">Wallet Address:</label>
        <input type="text" id="address" placeholder="0x..." value="0x742d35Cc69A83FebdF1F6Ad0E7f6ba7e3E1e99aE">
    </div>

    <div class="form-group">
        <label for="amount">Amount (ETH):</label>
        <input type="number" id="amount" placeholder="0.001" step="0.001" value="0.001">
    </div>

    <div class="form-group">
        <label for="message">Message:</label>
        <input type="text" id="message" placeholder="Test payment" value="Test payment">
    </div>

    <div class="form-group">
        <label for="chainId">Chain ID:</label>
        <select id="chainId">
            <option value="1">Ethereum Mainnet (1)</option>
            <option value="11155111" selected>Sepolia Testnet (11155111)</option>
            <option value="137">Polygon (137)</option>
        </select>
    </div>

    <button onclick="generateEthereumURI()">Generate Ethereum URI QR</button>
    <button onclick="generateSimpleAddress()">Generate Address-Only QR</button>
    <button onclick="generateJSON()">Generate JSON QR</button>
    <button onclick="clearQR()">Clear</button>

    <div id="qrcode"></div>

    <hr style="margin: 30px 0;">

    <h2>ðŸ“± Sample QR Codes for Testing</h2>
    <p>Use these pre-generated QR codes to test the scanner:</p>

    <div class="sample-qr">
        <h3>Simple Address QR</h3>
        <div id="sample1"></div>
        <p><strong>Address:</strong> 0x742d35Cc69A83FebdF1F6Ad0E7f6ba7e3E1e99aE</p>
    </div>

    <div class="sample-qr">
        <h3>Payment Request QR (0.001 ETH)</h3>
        <div id="sample2"></div>
        <p><strong>Amount:</strong> 0.001 ETH<br><strong>Message:</strong> Test Payment</p>
    </div>

    <div class="sample-qr">
        <h3>JSON Format QR</h3>
        <div id="sample3"></div>
        <p><strong>Format:</strong> JSON with all payment details</p>
    </div>

    <script>
        function generateEthereumURI() {
            const address = document.getElementById('address').value;
            const amount = document.getElementById('amount').value;
            const message = document.getElementById('message').value;
            const chainId = document.getElementById('chainId').value;

            let uri = `ethereum:${address}@${chainId}`;
            
            const params = new URLSearchParams();
            if (amount) {
                params.append('value', (parseFloat(amount) * 1e18).toString());
            }
            if (message) {
                params.append('message', message);
            }
            
            if (params.toString()) {
                uri += '?' + params.toString();
            }

            generateQR(uri, 'Ethereum URI Format');
        }

        function generateSimpleAddress() {
            const address = document.getElementById('address').value;
            generateQR(address, 'Simple Address Format');
        }

        function generateJSON() {
            const address = document.getElementById('address').value;
            const amount = document.getElementById('amount').value;
            const message = document.getElementById('message').value;
            const chainId = document.getElementById('chainId').value;

            const paymentData = {
                address: address,
                ...(amount && { amount: amount }),
                ...(message && { message: message }),
                chainId: parseInt(chainId),
                token: 'ETH'
            };

            generateQR(JSON.stringify(paymentData), 'JSON Format');
        }

        function generateQR(data, title) {
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = `<h3>${title}</h3>`;
            
            const qrDiv = document.createElement('div');
            qrDiv.className = 'qr-container';
            
            QRCode.toCanvas(qrDiv, data, {
                width: 256,
                margin: 2
            }, function (error) {
                if (error) {
                    console.error(error);
                    qrDiv.innerHTML = '<p>Error generating QR code</p>';
                }
            });
            
            qrContainer.appendChild(qrDiv);
            
            const dataDiv = document.createElement('div');
            dataDiv.innerHTML = `<p><strong>Data:</strong> <code>${data}</code></p>`;
            qrContainer.appendChild(dataDiv);
        }

        function clearQR() {
            document.getElementById('qrcode').innerHTML = '';
        }

        // Generate sample QR codes on page load
        window.onload = function() {
            // Sample 1: Simple address
            QRCode.toCanvas(document.getElementById('sample1'), '0x742d35Cc69A83FebdF1F6Ad0E7f6ba7e3E1e99aE', {
                width: 150,
                margin: 1
            });

            // Sample 2: Ethereum URI with amount
            const uri = 'ethereum:0x742d35Cc69A83FebdF1F6Ad0E7f6ba7e3E1e99aE@11155111?value=1000000000000000&message=Test%20Payment';
            QRCode.toCanvas(document.getElementById('sample2'), uri, {
                width: 150,
                margin: 1
            });

            // Sample 3: JSON format
            const jsonData = JSON.stringify({
                address: '0x742d35Cc69A83FebdF1F6Ad0E7f6ba7e3E1e99aE',
                amount: '0.001',
                message: 'JSON Test Payment',
                chainId: 11155111,
                token: 'ETH'
            });
            QRCode.toCanvas(document.getElementById('sample3'), jsonData, {
                width: 150,
                margin: 1
            });
        };
    </script>
</body>
</html>